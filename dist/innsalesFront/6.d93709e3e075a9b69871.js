(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"9Nrz":function(t,e,n){"use strict";n.r(e),n.d(e,"AgentModule",(function(){return P}));var o=n("ofXK"),a=n("PI13"),i=n("tyNb"),c=n("fXoL"),r=n("YJ7j"),s=n("jet3");let b=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Gb({type:t,selectors:[["app-agent"]],decls:3,vars:0,template:function(t,e){1&t&&(c.Nb(0,"app-navbar"),c.Nb(1,"router-outlet"),c.Nb(2,"app-footer"))},directives:[r.a,i.d,s.a],styles:[""]}),t})();var d=n("IheW"),u=n("cxbk"),l=n("qfBg");const h=u.a.URL;let p=(()=>{class t{constructor(t,e){this.http=t,this.userService=e}getMeetings(t){const e=new d.c({token:this.userService.token});return this.http.get(`${h}/getMeetingsAgent/${t}`,{headers:e})}getMeetingById(t){const e=new d.c({token:this.userService.token});return this.http.get(`${h}/getMeetingId/${t}`,{headers:e})}addMeeting(t){const e=new d.c({token:this.userService.token});return this.http.post(h+"/meetings",t,{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(d.a),c.Wb(l.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const g=u.a.URL;let m=(()=>{class t{constructor(t,e,n){this.meetingService=t,this.http=e,this.userService=n}getLeadById(t){const e=new d.c({token:this.userService.token});return this.http.get(`${g}/getLeadId/${t}`,{headers:e})}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(p),c.Wb(d.a),c.Wb(l.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var f=n("XiUz"),S=n("NFeN"),v=n("LPYB"),y=n("Wp6s"),C=n("bTqV");function R(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",0),c.Sb(1,"mat-card",9),c.Sb(2,"mat-card-header"),c.Sb(3,"mat-card-title"),c.zc(4),c.Rb(),c.Sb(5,"mat-card-subtitle"),c.zc(6),c.Rb(),c.Rb(),c.Sb(7,"mat-card-content"),c.Sb(8,"div",10),c.Sb(9,"h1"),c.zc(10),c.Rb(),c.Sb(11,"h2"),c.zc(12,"100% Qualified "),c.Rb(),c.Rb(),c.Rb(),c.Sb(13,"mat-card-actions"),c.Sb(14,"button",11),c.ac("click",(function(){c.qc(t);const n=e.$implicit;return c.ec().seeMeeting(n._id)})),c.zc(15,"Meeting"),c.Rb(),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit;c.Bb(4),c.Cc(" ",t.le_firstName," ",t.le_lastName,""),c.Bb(2),c.Bc(" ",t.le_email,""),c.Bb(4),c.Ac(t.le_area)}}let x=(()=>{class t{constructor(t,e,n,o){this.meetingService=t,this.userService=e,this.leadService=n,this.router=o,this.meetings=[],this.leads=[],this.doughnutChartData=[100],this.doughnutChartOptions={responsive:!0,legend:{position:"top",labels:{fontColor:"black",fontSize:20}},plugins:{datalabels:{formatter:(t,e)=>e.chart.data.labels[e.dataIndex]}}},this.doughnutChartType="doughnut",this.doughnutChartColors=[{backgroundColor:["rgba(236,76,64)"]}],this.doughnutChartColors2=[{backgroundColor:["rgba(0,188,213)"]}],this.userAuth=this.userService.getDataFromStorage("user"),this.meetingService.getMeetings(this.userAuth._id).subscribe(t=>{this.meetings=t.meetings,this.meetings.map(t=>{this.leadService.getLeadById(t.me_lead).subscribe(t=>{let e=!0;this.leads.map(n=>{n._id==t.lead._id&&(e=!1)}),e&&(t.lead.le_qualification=70,this.leads.push(t.lead))})})})}ngOnInit(){}chartClicked({event:t,active:e}){console.log(t,e)}chartHovered({event:t,active:e}){console.log(t,e)}seeMeeting(t){this.router.navigate(["agent/meetingReports",t])}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(p),c.Mb(l.a),c.Mb(m),c.Mb(i.b))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-dashboard"]],decls:32,vars:13,consts:[[1,"parent"],["fxLayoutGap","","fxLayout","row","fxLayoutAlign","center center",1,"parent"],["fxLayoutGap","","fxLayout","row","fxLayoutAlign","space-around center"],[1,"element"],[2,"color","#bdc7cc"],[2,"color","#748488"],["baseChart","",3,"data","options","chartType","colors"],["fxLayoutGap","","fxLayout","row","fxLayoutAlign","center center"],["class","parent",4,"ngFor","ngForOf"],[1,"example-card"],["fxLayout","column","fxLayoutAlign","space-between start"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Sb(2,"h1"),c.Sb(3,"mat-icon"),c.zc(4,"leaderboard"),c.Rb(),c.zc(5," Monthly Achievements "),c.Rb(),c.Rb(),c.Sb(6,"div",2),c.Sb(7,"div",3),c.Sb(8,"h2",4),c.zc(9,"Conversion Rate"),c.Rb(),c.Sb(10,"h2",5),c.zc(11,"45%"),c.Rb(),c.Nb(12,"canvas",6),c.Rb(),c.Sb(13,"div",3),c.Sb(14,"h2",4),c.zc(15,"Number of Calls"),c.Rb(),c.Sb(16,"h2",5),c.zc(17,"60"),c.Rb(),c.Nb(18,"canvas",6),c.Rb(),c.Sb(19,"div",3),c.Sb(20,"h2",4),c.zc(21,"Qualified Leads"),c.Rb(),c.Sb(22,"h2",5),c.zc(23,"27"),c.Rb(),c.Nb(24,"canvas",6),c.Rb(),c.Rb(),c.Rb(),c.Sb(25,"div",7),c.Sb(26,"h1"),c.Sb(27,"mat-icon"),c.zc(28,"supervisor_account"),c.Rb(),c.zc(29," Leads "),c.Rb(),c.Rb(),c.Sb(30,"div",3),c.yc(31,R,16,4,"div",8),c.Rb()),2&t&&(c.Bb(12),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors),c.Bb(6),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors2),c.Bb(6),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors),c.Bb(7),c.jc("ngForOf",e.leads))},directives:[f.e,f.d,f.c,S.a,v.a,o.j,y.a,y.d,y.g,y.f,y.c,y.b,C.b],styles:[".parent[_ngcontent-%COMP%]{justify-content:center;margin-top:50px;margin-bottom:50px}.element[_ngcontent-%COMP%], .parent[_ngcontent-%COMP%]{align-items:center;flex-direction:column}.element[_ngcontent-%COMP%]{display:flex;height:100%;margin-top:10px;margin-bottom:10px}.example-card[_ngcontent-%COMP%]{width:600px}"]}),t})();var _=n("mrSG"),L=n("PSD3"),B=n.n(L);const M=u.a.URL;let k=(()=>{class t{constructor(t){this.http=t}uploadFile(t,e){const n=new FormData;return n.append("archivos",t),new Promise(t=>{this.http.post(`${M}/uploads/audio/${e}`,n).subscribe(e=>{t(!!e.ok)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Wb(d.a))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var z=n("xHqg");function w(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",28),c.ac("click",(function(){return c.qc(t),c.ec().playAudio()})),c.Sb(1,"h1"),c.Sb(2,"mat-icon",29),c.zc(3,"play_circle_outline"),c.Rb(),c.Rb(),c.Rb()}}function O(t,e){if(1&t){const t=c.Tb();c.Sb(0,"button",30),c.ac("click",(function(){return c.qc(t),c.ec().stopAudio()})),c.Sb(1,"h1"),c.Sb(2,"mat-icon",29),c.zc(3,"pause_circle_outline"),c.Rb(),c.Rb(),c.Rb()}}const T=[{path:"",component:b,children:[{path:"dashboard",component:x},{path:"meetingReports/:idLead",component:(()=>{class t{constructor(t,e,n,o){this.userService=t,this.meetingService=e,this.activatedRoute=n,this.storageService=o,this.isLinear=!1,this.meetingId="",this.idLead="",this.playButton=!0,this.player=new Audio,this.meeting={_id:"",me_transcript:"",me_number:1},this.doughnutChartData=[100],this.doughnutChartOptions={responsive:!0,legend:{position:"top",labels:{fontColor:"black",fontSize:20}},plugins:{datalabels:{formatter:(t,e)=>e.chart.data.labels[e.dataIndex]}}},this.doughnutChartType="doughnut",this.doughnutChartColors=[{backgroundColor:["rgba(236,76,64)"]}],this.doughnutChartColors2=[{backgroundColor:["rgba(0,188,213)"]}],this.userAuth=this.userService.getDataFromStorage("user"),this.activatedRoute.params.subscribe(t=>{this.idLead=t.idLead})}ngOnInit(){}uploadFile(t){return Object(_.a)(this,void 0,void 0,(function*(){B.a.fire({allowOutsideClick:!1,icon:"info",text:"Analyzing audio...",heightAuto:!1}),B.a.showLoading(),this.audioFile=t.target.files[0],this.meeting.me_lead=this.idLead,this.meeting.me_agent=this.userAuth._id,this.meetingService.addMeeting(this.meeting).subscribe(t=>Object(_.a)(this,void 0,void 0,(function*(){t.ok&&(this.meetingId=t.meeting._id,yield this.storageService.uploadFile(this.audioFile,this.meetingId),setTimeout(()=>this.getMeeting(),25e3))})))}))}playAudio(){this.player.src="https://innsalesbackend.herokuapp.com/audios/audio/"+this.meeting.me_audio,this.player.load(),this.player.play(),this.playButton=!1}stopAudio(){this.player.pause(),this.playButton=!0}getMeeting(){this.meetingService.getMeetingById(this.meetingId).subscribe(t=>{this.meeting=t.meeting,B.a.close(),B.a.fire({allowOutsideClick:!1,icon:"success",text:"The analysis has been completed successfully.",title:"Go to step 2!",heightAuto:!1}),console.log(this.meeting)})}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(l.a),c.Mb(p),c.Mb(i.a),c.Mb(k))},t.\u0275cmp=c.Gb({type:t,selectors:[["app-meeting-reports"]],decls:74,vars:30,consts:[[1,"parent"],["color","warn",3,"linear"],["stepper",""],["label","Upload file","color","warn"],[1,"element"],["mat-raised-button","","color","accent",3,"click"],["type","file","id","fileInput","accept","any/*",2,"display","none",3,"change"],["fileInput",""],["label","Conversation",3,"click"],["fxLayout","row","fxLayoutAlign","space-around start"],["fxLayout","column","fxLayoutAlign","space-around center","fxFlex","50"],[1,"reproductor"],["type","audio/wav",3,"src"],["mat-icon-button","","color","accent",3,"click",4,"ngIf"],["mat-icon-button","","color","warn",3,"click",4,"ngIf"],["fxFlex","50"],["label","Meeting Reports"],["fxLayoutGap","","fxLayout","row","fxLayoutAlign","center center"],[2,"color","#bdc7cc"],[2,"color","#748488"],["baseChart","",3,"data","options","chartType","colors"],["fxLayout","row","fxLayoutAlign","center center",2,"width","300px"],[1,"divLeadCo",2,"background-color","#00bcd5",3,"fxFlex"],[2,"color","#748488","font-size","25px"],[1,"divLeadCo",2,"background-color","#bdc7cc",3,"fxFlex"],["label","Lead Reports"],[1,"divBorder"],[2,"color","#00bcd5"],["mat-icon-button","","color","accent",3,"click"],[1,"icon-display"],["mat-icon-button","","color","warn",3,"click"]],template:function(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",0),c.Sb(1,"mat-horizontal-stepper",1,2),c.Sb(3,"mat-step",3),c.Sb(4,"div",4),c.Sb(5,"button",5),c.ac("click",(function(){return c.qc(t),c.oc(8).click()})),c.zc(6,"Upload Audio File"),c.Rb(),c.Sb(7,"input",6,7),c.ac("change",(function(t){return e.uploadFile(t)})),c.Rb(),c.Rb(),c.Rb(),c.Sb(9,"mat-step",8),c.ac("click",(function(){return e.getMeeting()})),c.Sb(10,"div",9),c.Sb(11,"div",10),c.Sb(12,"h1"),c.zc(13,"Conversation audio"),c.Rb(),c.Sb(14,"div",11),c.Nb(15,"audio",12),c.yc(16,w,4,0,"button",13),c.yc(17,O,4,0,"button",14),c.Rb(),c.Rb(),c.Sb(18,"div",15),c.Sb(19,"h1"),c.zc(20,"Conversation Transcript"),c.Rb(),c.Sb(21,"span"),c.zc(22),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(23,"mat-step",16),c.Sb(24,"div",17),c.Sb(25,"div",4),c.Sb(26,"h2",18),c.zc(27,"Time in call"),c.Rb(),c.Sb(28,"h2",19),c.zc(29),c.Rb(),c.Nb(30,"canvas",20),c.Rb(),c.Sb(31,"div",4),c.Sb(32,"h2",18),c.zc(33,"Lead Conversation"),c.Rb(),c.Sb(34,"h3"),c.zc(35,"Me/Lead"),c.Rb(),c.Sb(36,"div",21),c.Sb(37,"div",22),c.Sb(38,"h1",23),c.zc(39),c.Rb(),c.Rb(),c.Sb(40,"div",24),c.Sb(41,"h1",23),c.zc(42),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Sb(43,"div",4),c.Sb(44,"h2",18),c.zc(45,"Meeting score"),c.Rb(),c.Sb(46,"h2",19),c.zc(47),c.Rb(),c.Nb(48,"canvas",20),c.Rb(),c.Rb(),c.Rb(),c.Sb(49,"mat-step",25),c.Sb(50,"div",17),c.Sb(51,"div",4),c.Sb(52,"h2",18),c.zc(53,"Lead Qualification"),c.Rb(),c.Sb(54,"h2",19),c.zc(55),c.Rb(),c.Nb(56,"canvas",20),c.Rb(),c.Sb(57,"div",4),c.Sb(58,"h2",18),c.zc(59,"Lead Scoring"),c.Rb(),c.Sb(60,"h2",19),c.zc(61),c.Rb(),c.Nb(62,"canvas",20),c.Rb(),c.Sb(63,"div",4),c.Sb(64,"div",26),c.Sb(65,"h2",18),c.zc(66,"Can lead advance?"),c.Rb(),c.Sb(67,"h1",27),c.zc(68,"Not yet"),c.Rb(),c.Rb(),c.Sb(69,"div",26),c.Sb(70,"h2",18),c.zc(71,"Voice Sentiment"),c.Rb(),c.Sb(72,"h1",27),c.zc(73),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb(),c.Rb()}2&t&&(c.Bb(1),c.jc("linear",e.isLinear),c.Bb(14),c.jc("src",e.audioFile,c.rc),c.Bb(1),c.jc("ngIf",e.playButton),c.Bb(1),c.jc("ngIf",!e.playButton),c.Bb(5),c.Ac(e.meeting.me_transcript),c.Bb(7),c.Ac(e.meeting.me_timeInCall),c.Bb(1),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors),c.Bb(7),c.jc("fxFlex",e.meeting.me_agentTime),c.Bb(2),c.Bc("",e.meeting.me_agentTime,"%"),c.Bb(1),c.jc("fxFlex",e.meeting.me_leadTime),c.Bb(2),c.Bc("",e.meeting.me_leadTime,"%"),c.Bb(5),c.Bc("",e.meeting.me_score,"%"),c.Bb(1),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors),c.Bb(7),c.Bc("",e.meeting.me_leadQualification,"%"),c.Bb(1),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors),c.Bb(5),c.Bc("",e.meeting.me_leadScore,"%"),c.Bb(1),c.jc("data",e.doughnutChartData)("options",e.doughnutChartOptions)("chartType",e.doughnutChartType)("colors",e.doughnutChartColors2),c.Bb(11),c.Ac(e.meeting.me_voiceSentiment))},directives:[z.a,z.b,C.b,f.d,f.c,f.a,o.k,f.e,v.a,S.a],styles:[".parent[_ngcontent-%COMP%]{margin-top:100px}.element[_ngcontent-%COMP%], .parent[_ngcontent-%COMP%]{justify-content:center;align-items:center;flex-direction:column;margin-bottom:10px;width:100%}.element[_ngcontent-%COMP%]{display:flex;height:100%;margin-top:10px}.divBorder[_ngcontent-%COMP%]{border-color:#bdc7cc;border-style:solid;width:400px;height:200px;border-radius:2%}.divBorder[_ngcontent-%COMP%], .divLeadCo[_ngcontent-%COMP%]{margin-top:50px;flex-direction:column}.divBorder[_ngcontent-%COMP%], .divLeadCo[_ngcontent-%COMP%], .reproductor[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.reproductor[_ngcontent-%COMP%]{background-color:#bdc7cc;height:90px;width:250px;border-radius:5%;border-style:solid;border-color:#748488}.icon-display[_ngcontent-%COMP%]{transform:scale(2)}.button-ico[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px}"]}),t})()},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}];let I=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},imports:[[i.c.forChild(T)],i.c]}),t})();var A=n("H8qh"),j=n("YUcS");let P=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},imports:[[o.c,a.a,i.c,I,A.a,v.b,j.a]]}),t})()}}]);